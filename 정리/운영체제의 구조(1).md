## 운영체제의 구조

### 응용 프로그램, 운영체제, 컴퓨터 하드웨어(시스템 리소스)의 관계

**도서관으로 비유해보자**

- 운영체제 : 도서관
- 응용 프로그램 : 시민
- 컴퓨터 하드웨어 : 책
- 운영 체제의 역할
  - 시민(**응용 프로그램**)은 도서관(**운영체제**)에 원하는 책(**자원**)을 요청한다.
  - 도서관(**운영체제**)은 적절한 책(**자원**)을 찾아서, 시민(**응용 프로그램**)에게 빌려준다.
  - 시민(**응용 프로그램**)이 가지고 있는 책(**자원**)의 기한이 다 되면 도서관(**운영체제**)이 해당 책(**자원**)을 회수한다.

- 운영체제는 응용 프로그램이 요청하는 메모리를 허가하고 분배한다.
- 운영체제는 응용 프로그램이 요청하는 CPU 시간을 제공한다.
- 운영체제는 응용 프로그램이 요청하는 I/O Devices 사용을 허가 및 제어한다.



### 사용자, 응용 프로그램, 운영체제, 컴퓨터 하드웨어와 관계

<img src="https://user-images.githubusercontent.com/40616436/75167028-193f1000-5768-11ea-92b9-bfea7d0e6bb0.png" alt="image" style="zoom:50%;" />

- 요청과 응답 관계를 보여준다.



### 운영체제는 사용자를 위한 인터페이스를 제공

- 쉘(Shell)

  - 사용자가 운영체제의 기능과 서비스를 조작할 수 있도록 인터페이스를 제공하는 프로그램이다.

  - 쉘은 터미널 환경(CLI)과 GUI 환경으로 분류된다.

  - 일반적인 운영체제 관계

    <img src="https://user-images.githubusercontent.com/40616436/75168010-8e5f1500-5769-11ea-8ce5-6e7fd72a5616.png" alt="image" style="zoom:50%;" />

  - 쉘을 이용한 관계

    <img src="https://user-images.githubusercontent.com/40616436/75168236-e6961700-5769-11ea-916b-915c5e78f4e6.png" alt="image" style="zoom:50%;" />

    - 사용자와 운영체제 사이에 징검다리 역할을 하는 것이 응용 프로그램인데, **쉘 또한 응용 프로그램에 속하는 것이다.**

  

### 운영체제는 응용 프로그램을 위해서도 인터페이스를 제공

- API (Application Programming Interface)

  - 운영체제에 접근할 수 있는 요청서의 집합
  - 쉘 또한 API를 통해 운영체제에 접근하는 것이다.
  - 함수로 제공한다.
  - open()

- 운영체제와 API의 관계

  ![image](https://user-images.githubusercontent.com/40616436/75169713-5d341400-576c-11ea-9f8c-dfe3cd784c5e.png)

- 보통은 라이브러리(library) 형태로 제공된다.

  - C library 형태로 제공된다.



- **시스템 콜**

  - 시스템 콜 또는 시스템 호출 인터페이스라고 한다.
  - 운영체제가 **운영체제의 각 기능을 사용할 수 있도록 시스템 콜이라는 명령 또는 함수를 제공한다.**

  <img src="https://user-images.githubusercontent.com/40616436/75170304-3e824d00-576d-11ea-912f-a60ee27c879f.png" alt="image" style="zoom:45%;" />

  - 시스템 콜을 통해서 운영체제의 기능을 요청하는 것인데, 시스템 콜을 직접적으로 사용하기에는 복잡한 면이 있어, Library 혹은 API라는 인터페이스를 통해 시스템 콜에 접근하고 운영체제의 기능을 요청하는 것이다.
    - Libary와 API 내부에는 시스템 콜을 호출하는 형태로 만들어져 있다.
    - Libar와 API를 기반으로 해서 Application과 Shell을 만드는 것이다.



### 운영체제를 만든다면?

1. 운영체제를 개발한다. (kernel)
2. 시스템 콜을 개발한다.
3. 시스템 콜을 사용하는 C || JAVA API를 제공한다. (Library)
4. Shell 프로그램을 만든다.
5. 응용 프로그램을 만든다.



### 운영체제와 시스템 콜

- 시스템 콜 정의 예
  - POSIX API, 윈도우 API

> API : 각 언어별 운영체제 기능을 호출하는 인터페이스 함수 (각 언어별 인터페이스)
>
> 시스템 콜 : 운영체제 기능을 호출하는 함수



### 정리

- 운영체제는 컴퓨터 하드웨어와 응용 프로그램을 관리한다.
- 사용자 인터페이스를 제공하기 위해 쉘 프로그램을 제공한다.
- 응용 프로그램이 운영체제 기능을 요청하기 위해서, 운영체제는 시스템 콜을 제공한다.
  - 보통 시스템 콜을 직접 사용하기 보다는, 해당 시스템 콜을 사용해서 만든 각 언어별 라이브러리(API)를 사용한다.
  - <img src="https://user-images.githubusercontent.com/40616436/75170304-3e824d00-576d-11ea-912f-a60ee27c879f.png" alt="image" style="zoom:45%;" />

